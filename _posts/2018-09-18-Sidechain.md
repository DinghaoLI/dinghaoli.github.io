---
layout: post
title:  "区块链可拓展技术：侧链(Sidechain)"
date:   2018-09-19 00:00:00 +0800
categories: Blockchain
tags: Blockchain

---


本文参考：

[浅谈区块链可扩展技术：侧链、分片、DAG](http://www.bitett.com/portal.php?mod=view&aid=1587)      
[百万用户级Dapp—— 介绍应用程序特定侧链](https://medium.com/loom-network-chinese/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E4%B8%8A%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%97%85%E6%AF%92%E6%80%A7dapp-%E8%99%BD%E7%84%B6%E6%88%91%E4%BB%AC%E4%BB%A5%E5%89%8D%E6%9C%89%E6%96%87%E7%AB%A0%E5%88%86%E6%9E%90%E5%92%8C%E6%8F%8F%E8%BF%B0%E8%BF%87-%E5%85%B6%E6%98%AF%E5%90%A6%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96%E5%BE%88%E5%8F%AF%E7%96%91-%E5%B7%B2%E8%B6%B3%E4%BB%A5%E8%AE%A9%E7%BD%91%E7%BB%9C%E7%98%AB%E7%97%AA-8331e4ab5736)    
[主链和侧链](https://36kr.com/p/5129785.html)    



**无论是比特币还是以太坊，都无法摆脱这个不可能三角：**

- 可拓展性（高吞吐，高容量）
- 去中心化（公有网络，链上自制）
- 安全性（各个节点的一致性，甚至是隐私安全）

在这个三角中，往往只能3选2，不管根据需求进行权衡。

**以太坊上的第一个病毒性DApp已经足以让网络瘫痪。随着交易费用和交易积压量的增加，对扩展解决方案的需求变得越来越迫切。**

<br/>

### 分层的思想

分层的思想在计算机的发展历史中来看非常常见，上述问题犹如CPU存储架构的问题：容量、价格、速度无法同时满足。但是可以使用分层的做法，每一层不需要满足所有要求，使用不同的层去满足不同的需求，比如CPU的L1、L2、L3的分层架构，从分层的角度优化了这个问题：

![](../../../images/article/cache.png) 

 读取速度:

- L1 cache: 3 cycles
- L2 cache: 11 cycles
- L3 cache: 25 cycles
- Main Memory: 100 cycles

L1的速度快，容量小，L2比L1速度慢一些，容量比L1大一些...以此类推。然后CPU可以在运行时按需使用不同层次的存储。

<br/>

### 侧链(Sidechain)


**侧链也是利用了类似分层的思想：我不需要所有的计算和所有的任务都交给主链来处理，而是用一个“侧链”去自定义自己的服务，当需要主链的验证时，在去和主链沟通。沟通旨在实现双向锚定，让某种加密货币在主链以及侧链之间互相“转移”。以比特币为例：通过侧链技术，比特币可从主链“转移”到其他区块链之上，并在“转移”后的区块链上使用，同时还能安全“返回”主链；整个过程比特币保持着相同的价值。所以说，侧链的概念是相对主链而言的；只要符合侧链协议，所有现存的区块链，如以太坊、莱特币、Zcash等等都可成为侧链。**

![](../../../images/article/sidechain.jpeg)

侧链这一术语在Adam Back等人2014年左右的论文[《用楔入式侧链实现区块链的创新》](https://blockstream.com/sidechains.pdf)被首次讨论。论文描述了“双向楔入侧链”，这种机制通过证明你已经“锁定”了一些你拥有的货币，从而允许你在一个侧链内操作一些其他的货币。

**这里要澄清一个误解。**

>侧链能增加规模，但是这不意味着扩展性。侧链在提升扩展性上并不比增加区块体积优秀。侧链带来的是实验的能力。能够建立以不同的，甚至可能更好的技术为基础的网络。[1](https://bitcoin.stackexchange.com/questions/40770/would-sidechains-help-bitcoin-scale)

**他们使创新成为可能**

一个侧链是由一个自定义的“规则集”来定义的，可以被用来从另一个链中分流计算。每个侧链可以从主链中遵循不同的规则， 这意味着它们可以对需要极高速度或繁重计算的应用进行优化，同时仍然依靠主链来处理需要最高安全级别的请求。

<br/>

### 应用特定的侧链

定义一个侧链的规则可能意味着增加隐私特性，甚至交易安全性和分散性以获得更高的吞吐量。这里有很大的试验空间，根据单个应用的需要，什么样的权衡应该产生最优的性能。

而且，在数据驱动的应用中，激励机制与财务应用不同。对于攻击者来说，花数亿美元去攻击一个金融区块链并逆转支付或许是值得的，但是在微博平台上逆转一条推文就可能毫无意义。因此，应用程序也需要能够选择更灵活的威胁建模并优化性能

>对于具有抗审查、透明和高性能的不可阻挡的应用程序目前有非常大的需求量。

考虑到这一点，在一个运行于区块链上的基于twitter的分散式应用程序中，可调节的安全性可以提供更高的吞吐量，同时向主链提交“检查点”，从而声明到目前为止的数据结尾。

既然我们已经描述了一种扩展DApps的方法，如果一个实体由于一个潜在的宽松安全模型而聚集了太多的权限，并且能够控制一个侧链，会发生什么呢?

<br/>

### 通过硬分叉实现独立

在subreddit这样的集中式社区，有时会有一个不良的版主出现，开始根据他的动机审查发言，最终让社区分崩离析。

像魔兽世界这样的多人游戏中，有时候一些巨大改动是违背社区意愿的，还不给用户留下任何抗议的选项 — — 他们被迫要么接受要么退出游戏。就连Vitalik Buterin也为这样的事情感到震惊！

>我在2007-2010这些年里，玩魔兽世界玩得很开心，但是一天暴雪突然将我心爱的术士的虹吸生命魔法删除了。我哭着睡着了，那天我意识到中央集权的服务会带给我怎样的恐怖。我很快就决定不玩了。


达到这一目的的关键就是侧链硬分叉。

在尽可能简洁的情况下，分叉是一种协议升级机制。在Vitalik的博客上可以找到一个很好的分叉对比。

![](../../../images/article/fork.png) 

>硬分叉是与之前版本的区块链的永久分离。运行以前版本的节点将不再被最新版本所接受。

<br/>

### 如何实现独立性的呢？

在一个违背社区共识的事件发生的时候，社区可以在与它发生纠纷之前，将侧链的状态转移到别处。

![](../../../images/article/fork2.png) 

在这种情况下，会出现很多问题。例如，在一个游戏中:

- 如果大多数“恶意”开发者决定留在旧的链条上会怎样?
- 新的链条会变得停滞不前，还是开发者会妥协和适应?

目前来说没有完美的的答案，但是我们相信自由市场将会解决这些问题，并且随着更多的自治应用程序的出现，最佳实践终将浮现。

有些专注于Eth的侧链开发的项目(如Loom Network)尝试在游戏领域搭建这样一个平台：

>让社区可以在侧链上运行他们的软件。在这个平台上，他们都有权享受一个可证明的公平、透明的平台，同时能够根据需求调整安全策略。社区将能在区块链上运行，在这里用户可以加速自己的节点并保证网络安全。这些可以是像steemit、subreddits、论坛、facebook群组、stackoverflow类问答网站这样的社区 — — 人们谈论共同兴趣的地方， 以及MMO游戏，每个人都对游戏剩余的公平感兴趣。当社区共识出现分歧的时候，用户必须能够“分叉”开。










